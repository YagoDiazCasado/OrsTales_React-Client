# ðŸ§± Arquitectura JavaScript del Cliente (RPG ORS)

## âœ… Normas internas

- ðŸ”„ **Todas las funciones de servicio son `async`.**
- ðŸŒ **Todos los servicios utilizan `fetch` para comunicarse con la API.**
- ðŸ§  **Los objetos tipo `Central` son `export const` y conservan estado del cliente.**
- â™»ï¸ **Todo se organiza en objetos `singleton` exportados.**

---

## ðŸ“¦ Arquitectura por capas

---

### ðŸ“ Servicios (`/service`)

> Singleton de funciones `async` que acceden a la API con `fetch`.

```js
const API_URL = "http://localhost:8080/api/pj";

export const PjService = {
  async getAll() {
    const res = await fetch(`${API_URL}`);
    return await res.json();
  },

  async create(pj) {
    const res = await fetch(`${API_URL}/create`, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(pj)
    });
    return await res.json();
  }
};
```

---

### ðŸ”§ Utilidades (`/utilities`)

> Igual que los servicios, pero para lÃ³gica del cliente o ayuda general.

```js
export const PjUtilities = {
  diceLobby(pj, type) {
    const stat = pj[type];
    if (stat <= 5) return 2;
    if (stat <= 15) return 4;
    if (stat <= 25) return 6;
    if (stat <= 30) return 8;
    if (stat <= 45) return 10;
    if (stat <= 55) return 12;
    if (stat <= 65) return 16;
    if (stat <= 75) return 18;
    return 20;
  }
};
```

---

### ðŸ“œ Enums (`/enums`)

> Singleton de constantes congeladas (inmutables).

```js
export const BasicHitter = Object.freeze({
  FISTS: "FISTS",
  LEGS: "LEGS",
  ELBOWS: "ELBOWS",
  KNEES: "KNEES",
  FINGERS: "FINGERS",
  BLADEHANDS: "BLADEHANDS"
});
```

---

### ðŸ§  NÃºcleo (`/core`)

> Objeto vivo centralizado que mantiene el estado compartido del cliente.

```js
export const Central = {
  apiUrl: "http://localhost:8080/api",
  currentAdventure: null,
  userRole: "player",
  dado: {
    nextInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
  }
};
```

---

### ðŸ“‚ Entidades / Modelos (`/models`)

> Clases exportadas por defecto con mÃ©todos asociados.

```js
export default class PJ {
  constructor({ name, str, dex, end, hp, maxHp }) {
    this.name = name;
    this.str = str;
    this.dex = dex;
    this.end = end;
    this.hp = hp;
    this.maxHp = maxHp;
  }

  isAlive() {
    return this.hp > 0;
  }

  heal(amount) {
    this.hp = Math.min(this.hp + amount, this.maxHp);
  }
}
```

---

ðŸ“Œ **Nota:** Todas estas clases deben vivir en carpetas claras segÃºn su categorÃ­a:  
`/service`, `/utilities`, `/core`, `/enums`, `/models`.
